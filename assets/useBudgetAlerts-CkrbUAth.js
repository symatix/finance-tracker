import{m as h,r as D}from"./index-pDMVrzzH.js";function w(){const{plannedExpenses:r,getBalance:c,getAvailablePerDay:g}=h(),d=D.useMemo(()=>{const t=[],n=c(),m=g(),s=r.filter(e=>{if(e.status==="completed"||e.status==="cancelled")return!1;const a=new Date(e.due_date),o=new Date,p=new Date;return p.setDate(o.getDate()+30),a>=o&&a<=p});s.sort((e,a)=>new Date(e.due_date).getTime()-new Date(a.due_date).getTime());const u=s.reduce((e,a)=>e+a.amount,0);u>n?t.push({type:"danger",message:`Your planned expenses ($${u.toFixed(2)}) exceed your current balance ($${n.toFixed(2)})`}):u>n*.8&&t.push({type:"warning",message:`Your planned expenses will use ${(u/n*100).toFixed(1)}% of your current balance`}),s.forEach(e=>{e.priority==="urgent"&&e.amount>n*.5?t.push({type:"danger",message:`Urgent expense "${e.name}" ($${e.amount.toFixed(2)}) is ${(e.amount/n*100).toFixed(1)}% of your balance`,expenseId:e.id,amount:e.amount,dueDate:e.due_date}):e.priority==="high"&&e.amount>n*.3&&t.push({type:"warning",message:`High priority expense "${e.name}" ($${e.amount.toFixed(2)}) due ${new Date(e.due_date).toLocaleDateString()}`,expenseId:e.id,amount:e.amount,dueDate:e.due_date})});const y=u/30;y>m*.5&&t.push({type:"warning",message:`Your planned expenses will reduce your daily available amount by ${(y/m*100).toFixed(1)}%`});const f=new Date().toISOString().split("T")[0],i=s.filter(e=>e.due_date===f);if(i.length>0){const e=i.reduce((a,o)=>a+o.amount,0);t.push({type:"info",message:`You have ${i.length} expense(s) due today totaling $${e.toFixed(2)}`})}const l=r.filter(e=>e.status==="completed"||e.status==="cancelled"?!1:new Date(e.due_date)<new Date);if(l.length>0){const e=l.reduce((a,o)=>a+o.amount,0);t.push({type:"danger",message:`You have ${l.length} overdue expense(s) totaling $${e.toFixed(2)}`})}return t},[r,c,g]);return{alerts:d,hasWarnings:d.some(t=>t.type==="warning"||t.type==="danger"),hasDanger:d.some(t=>t.type==="danger")}}export{w as u};
