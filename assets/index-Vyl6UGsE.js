import{g as Y,f as Q,v as ge,w as F,j as t,r as j,h as X,x as xe,y as N,k as z,c as V,z as M,b as Z,A as E,C as re,D as se,t as L,F as H,I as G,S as _,M as D,E as O,G as $,m as ee,H as fe,B as W,T as te,J as K,P as ve,K as le}from"./index-D0y3vrdU.js";import{f as ye}from"./formatCurrency-DRYgsAPj.js";import{C as be,T as me,a as he,b as je,c as ie,d as w,e as Ce,E as Se,D as Te,f as Pe,g as Ie,h as ke,i as we}from"./Edit-Cc-FiFmw.js";import{D as ce}from"./Divider-DWx_ngT3.js";function De(e){return Y("MuiPagination",e)}Q("MuiPagination",["root","ul","outlined","text"]);function Me(e={}){const{boundaryCount:a=1,componentName:n="usePagination",count:o=1,defaultPage:l=1,disabled:i=!1,hideNextButton:y=!1,hidePrevButton:p=!1,onChange:x,page:f,showFirstButton:s=!1,showLastButton:u=!1,siblingCount:d=1,...c}=e,[g,v]=ge({controlled:f,default:l,name:n,state:"page"}),h=(m,S)=>{f||v(S),x&&x(m,S)},I=(m,S)=>{const B=S-m+1;return Array.from({length:B},(ae,q)=>m+q)},C=I(1,Math.min(a,o)),b=I(Math.max(o-a+1,a+1),o),k=Math.max(Math.min(g-d,o-a-d*2-1),a+2),T=Math.min(Math.max(g+d,a+d*2+2),o-a-1),r=[...s?["first"]:[],...p?[]:["previous"],...C,...k>a+2?["start-ellipsis"]:a+1<o-a?[a+1]:[],...I(k,T),...T<o-a-1?["end-ellipsis"]:o-a>a?[o-a]:[],...b,...y?[]:["next"],...u?["last"]:[]],A=m=>{switch(m){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return o;default:return null}};return{items:r.map(m=>typeof m=="number"?{onClick:S=>{h(S,m)},type:"page",page:m,selected:m===g,disabled:i,"aria-current":m===g?"page":void 0}:{onClick:S=>{h(S,A(m))},type:m,page:A(m),selected:!1,disabled:i||!m.includes("ellipsis")&&(m==="next"||m==="last"?g>=o:g<=1)}),...c}}function Ae(e){return Y("MuiPaginationItem",e)}const P=Q("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),$e=F(t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),Le=F(t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),ze=F(t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),Re=F(t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),de=(e,a)=>{const{ownerState:n}=e;return[a.root,a[n.variant],a[`size${M(n.size)}`],n.variant==="text"&&a[`text${M(n.color)}`],n.variant==="outlined"&&a[`outlined${M(n.color)}`],n.shape==="rounded"&&a.rounded,n.type==="page"&&a.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&a.ellipsis,(n.type==="previous"||n.type==="next")&&a.previousNext,(n.type==="first"||n.type==="last")&&a.firstLast]},Ne=e=>{const{classes:a,color:n,disabled:o,selected:l,size:i,shape:y,type:p,variant:x}=e,f={root:["root",`size${M(i)}`,x,y,n!=="standard"&&`color${M(n)}`,n!=="standard"&&`${x}${M(n)}`,o&&"disabled",l&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[p]],icon:["icon"]};return Z(f,Ae,a)},Oe=z("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:de})(E(({theme:e})=>({...e.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:{size:"small"},style:{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)}}]}))),Fe=z(re,{name:"MuiPaginationItem",slot:"Root",overridesResolver:de})(E(({theme:e})=>({...e.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${P.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)},[`&.${P.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}},variants:[{props:{size:"small"},style:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)}},{props:{shape:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"outlined"},style:{border:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${P.selected}`]:{[`&.${P.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}}}},{props:{variant:"text"},style:{[`&.${P.selected}`]:{[`&.${P.disabled}`]:{color:(e.vars||e).palette.action.disabled}}}},...Object.entries(e.palette).filter(se(["dark","contrastText"])).map(([a])=>({props:{variant:"text",color:a},style:{[`&.${P.selected}`]:{color:(e.vars||e).palette[a].contrastText,backgroundColor:(e.vars||e).palette[a].main,"&:hover":{backgroundColor:(e.vars||e).palette[a].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a].main}},[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a].dark},[`&.${P.disabled}`]:{color:(e.vars||e).palette.action.disabled}}}})),...Object.entries(e.palette).filter(se(["light"])).map(([a])=>({props:{variant:"outlined",color:a},style:{[`&.${P.selected}`]:{color:(e.vars||e).palette[a].main,border:`1px solid ${e.alpha((e.vars||e).palette[a].main,.5)}`,backgroundColor:e.alpha((e.vars||e).palette[a].main,(e.vars||e).palette.action.activatedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[a].main,`${(e.vars||e).palette.action.activatedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette[a].main,`${(e.vars||e).palette.action.activatedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}}}}))]}))),Be=z("div",{name:"MuiPaginationItem",slot:"Icon"})(E(({theme:e})=>({fontSize:e.typography.pxToRem(20),margin:"0 -8px",variants:[{props:{size:"small"},style:{fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:e.typography.pxToRem(22)}}]}))),Ee=j.forwardRef(function(a,n){const o=X({props:a,name:"MuiPaginationItem"}),{className:l,color:i="standard",component:y,components:p={},disabled:x=!1,page:f,selected:s=!1,shape:u="circular",size:d="medium",slots:c={},slotProps:g={},type:v="page",variant:h="text",...I}=o,C={...o,color:i,disabled:x,selected:s,shape:u,size:d,type:v,variant:h},b=xe(),k=Ne(C),T={slots:{previous:c.previous??p.previous,next:c.next??p.next,first:c.first??p.first,last:c.last??p.last},slotProps:g},[r,A]=N("previous",{elementType:ze,externalForwardedProps:T,ownerState:C}),[R,m]=N("next",{elementType:Re,externalForwardedProps:T,ownerState:C}),[S,B]=N("first",{elementType:$e,externalForwardedProps:T,ownerState:C}),[ae,q]=N("last",{elementType:Le,externalForwardedProps:T,ownerState:C}),ne=b?{previous:"next",next:"previous",first:"last",last:"first"}[v]:v,oe={previous:r,next:R,first:S,last:ae}[ne],ue={previous:A,next:m,first:B,last:q}[ne];return v==="start-ellipsis"||v==="end-ellipsis"?t.jsx(Oe,{ref:n,ownerState:C,className:V(k.root,l),children:"â€¦"}):t.jsxs(Fe,{ref:n,ownerState:C,component:y,disabled:x,className:V(k.root,l),...I,children:[v==="page"&&f,oe?t.jsx(Be,{...ue,className:k.icon,as:oe}):null]})}),Ue=e=>{const{classes:a,variant:n}=e;return Z({root:["root",n],ul:["ul"]},De,a)},We=z("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.root,a[n.variant]]}})({}),Ve=z("ul",{name:"MuiPagination",slot:"Ul"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function He(e,a,n){return e==="page"?`${n?"":"Go to "}page ${a}`:`Go to ${e} page`}const Ge=j.forwardRef(function(a,n){const o=X({props:a,name:"MuiPagination"}),{boundaryCount:l=1,className:i,color:y="standard",count:p=1,defaultPage:x=1,disabled:f=!1,getItemAriaLabel:s=He,hideNextButton:u=!1,hidePrevButton:d=!1,onChange:c,page:g,renderItem:v=S=>t.jsx(Ee,{...S}),shape:h="circular",showFirstButton:I=!1,showLastButton:C=!1,siblingCount:b=1,size:k="medium",variant:T="text",...r}=o,{items:A}=Me({...o,componentName:"Pagination"}),R={...o,boundaryCount:l,color:y,count:p,defaultPage:x,disabled:f,getItemAriaLabel:s,hideNextButton:u,hidePrevButton:d,renderItem:v,shape:h,showFirstButton:I,showLastButton:C,siblingCount:b,size:k,variant:T},m=Ue(R);return t.jsx(We,{"aria-label":"pagination navigation",className:V(m.root,i),ownerState:R,ref:n,...r,children:t.jsx(Ve,{className:m.ul,ownerState:R,children:A.map((S,B)=>t.jsx("li",{children:v({...S,color:y,"aria-label":s(S.type,S.page,S.selected),shape:h,size:k,variant:T})},B))})})}),_e=F(t.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}));function qe(e){return Y("MuiTableSortLabel",e)}const J=Q("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),Je=e=>{const{classes:a,direction:n,active:o}=e,l={root:["root",o&&"active",`direction${M(n)}`],icon:["icon",`iconDirection${M(n)}`]};return Z(l,qe,a)},Ke=z(re,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.root,n.active&&a.active]}})(E(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${J.icon}`]:{opacity:.5}},[`&.${J.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${J.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}}))),Ye=z("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.icon,a[`iconDirection${M(n.direction)}`]]}})(E(({theme:e})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),U=j.forwardRef(function(a,n){const o=X({props:a,name:"MuiTableSortLabel"}),{active:l=!1,children:i,className:y,direction:p="asc",hideSortIcon:x=!1,IconComponent:f=_e,slots:s={},slotProps:u={},...d}=o,c={...o,active:l,direction:p,hideSortIcon:x,IconComponent:f},g=Je(c),v={slots:s,slotProps:u},[h,I]=N("root",{elementType:Ke,externalForwardedProps:v,ownerState:c,className:V(g.root,y),ref:n}),[C,b]=N("icon",{elementType:Ye,externalForwardedProps:v,ownerState:c,className:g.icon});return t.jsxs(h,{disableRipple:!0,component:"span",...I,...d,children:[i,x&&!l?null:t.jsx(C,{as:f,...b})]})}),Qe=F(t.jsx("path",{d:"M10.83 8H21V6H8.83zm5 5H18v-2h-4.17zM14 16.83V18h-4v-2h3.17l-3-3H6v-2h2.17l-3-3H3V6h.17L1.39 4.22 2.8 2.81l18.38 18.38-1.41 1.41z"}));function Xe(e,a){const[n,o]=j.useState({category:"",type:"",dateFrom:"",dateTo:"",minAmount:"",maxAmount:""}),[l,i]=j.useState({field:"date",direction:"desc"}),y=(s,u)=>{o(d=>({...d,[s]:u}))},p=s=>{i(u=>({field:s,direction:u.field===s&&u.direction==="asc"?"desc":"asc"}))},x=()=>{o({category:"",type:"",dateFrom:"",dateTo:"",minAmount:"",maxAmount:""})},f=j.useMemo(()=>e.filter(s=>n.category?s.categoryId===n.category:!0).filter(s=>n.type?s.type===n.type:!0).filter(s=>n.dateFrom?new Date(s.date)>=new Date(n.dateFrom):!0).filter(s=>n.dateTo?new Date(s.date)<=new Date(n.dateTo):!0).filter(s=>n.minAmount?s.amount>=Number(n.minAmount):!0).filter(s=>n.maxAmount?s.amount<=Number(n.maxAmount):!0).sort((s,u)=>{let d,c;switch(l.field){case"date":d=new Date(s.date).getTime(),c=new Date(u.date).getTime();break;case"amount":d=s.amount,c=u.amount;break;case"type":d=s.type,c=u.type;break;case"category":d=a(s.categoryId),c=a(u.categoryId);break;default:d=0,c=0}return d<c?l.direction==="asc"?-1:1:d>c?l.direction==="asc"?1:-1:0}),[e,n,l,a]);return{filters:n,sort:l,filteredAndSortedTransactions:f,updateFilter:y,updateSort:p,clearFilters:x}}function Ze({filters:e,categories:a,onFilterChange:n,onClearFilters:o}){const l=Object.values(e).some(i=>i!=="");return t.jsxs(L,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"flex-end",mb:3,children:[t.jsxs(H,{size:"small",sx:{minWidth:120},children:[t.jsx(G,{children:"Type"}),t.jsxs(_,{value:e.type,onChange:i=>n("type",i.target.value),label:"Type",children:[t.jsx(D,{value:"",children:"All"}),t.jsx(D,{value:"Income",children:"Income"}),t.jsx(D,{value:"Expense",children:"Expense"}),t.jsx(D,{value:"Savings",children:"Savings"})]})]}),t.jsxs(H,{size:"small",sx:{minWidth:150},children:[t.jsx(G,{children:"Category"}),t.jsxs(_,{value:e.category,onChange:i=>n("category",i.target.value),label:"Category",children:[t.jsx(D,{value:"",children:"All"}),a.map(i=>t.jsx(D,{value:i.id,children:i.name},i.id))]})]}),t.jsx(O,{label:"From",type:"date",size:"small",InputLabelProps:{shrink:!0},value:e.dateFrom,onChange:i=>n("dateFrom",i.target.value)}),t.jsx(O,{label:"To",type:"date",size:"small",InputLabelProps:{shrink:!0},value:e.dateTo,onChange:i=>n("dateTo",i.target.value)}),t.jsx(O,{label:"Min Amount",type:"number",size:"small",value:e.minAmount,onChange:i=>n("minAmount",i.target.value)}),t.jsx(O,{label:"Max Amount",type:"number",size:"small",value:e.maxAmount,onChange:i=>n("maxAmount",i.target.value)}),l&&t.jsx($,{variant:"outlined",startIcon:t.jsx(Qe,{}),onClick:o,size:"small",children:"Clear"})]})}function et(e,a,n){const[o,l]=j.useState(1),i=10,[y,p]=j.useState(!1),[x,f]=j.useState(null),[s,u]=j.useState(!1),[d,c]=j.useState(null),g=j.useMemo(()=>{const r=(o-1)*i;return e.slice(r,r+i)},[e,o]),v=Math.ceil(e.length/i);return{page:o,setPage:l,totalPages:v,paginatedTransactions:g,modalOpen:y,selectedTransaction:x,closeModal:()=>{p(!1),f(null)},confirmOpen:s,editTransaction:r=>{f(r),p(!0)},deleteTransaction:r=>{c(r),u(!0)},confirmDelete:()=>{d&&n(d),u(!1),c(null)},cancelDelete:()=>{u(!1),c(null)},saveTransaction:r=>{r.id&&a(r.id,{amount:r.amount,note:r.note,categoryId:r.categoryId,subcategory:r.subcategory}),p(!1),f(null)}}}const pe=({open:e,onClose:a,onSave:n,transaction:o,transactionType:l})=>{const{categories:i,isLoading:y}=ee(),p=!!o,x=o?.type||l,[f,s]=j.useState(""),[u,d]=j.useState(""),[c,g]=j.useState(""),[v,h]=j.useState("");j.useEffect(()=>{if(e){if(p&&o)s(o.amount.toString()),d(o.note||""),g(o.categoryId),h(o.subcategory||"");else if(l){const r=i.find(A=>A.type===l);s(""),d(""),g(r?.id||""),h("")}}},[e,o,l,i,p]);const I=i.filter(r=>r.type===x),b=i.find(r=>r.id===c)?.subcategories||[],k=()=>{!f||isNaN(Number(f))||!c||!x||(n({id:o?.id,amount:Number(f),note:u,categoryId:c,subcategory:v||void 0,type:x}),s(""),d(""),g(""),h(""),a())},T=()=>{s(""),d(""),g(""),h(""),a()};return t.jsx(fe,{open:e,onClose:T,anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:400},borderLeft:"1px solid",borderColor:"divider",backgroundColor:"#000000"}},children:t.jsxs(W,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#1a1a1a"},children:[t.jsxs(W,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[t.jsx(te,{variant:"h6",sx:{fontWeight:600},children:p?"Edit Transaction":`Add ${x}`}),t.jsx(K,{onClick:T,size:"small",children:t.jsx(be,{})})]}),t.jsx(ce,{sx:{mb:3}}),t.jsxs(L,{spacing:3,sx:{flexGrow:1,overflow:"visible"},children:[t.jsxs(H,{fullWidth:!0,children:[t.jsx(G,{children:"Category"}),t.jsx(_,{value:c,label:"Category",onChange:r=>g(r.target.value),children:I.map(r=>t.jsx(D,{value:r.id,children:r.name},r.id))})]}),c&&b.length>0&&t.jsxs(H,{fullWidth:!0,children:[t.jsx(G,{children:"Subcategory (Optional)"}),t.jsxs(_,{value:v,label:"Subcategory (Optional)",onChange:r=>h(r.target.value),children:[t.jsx(D,{value:"",children:"None"}),b.map(r=>t.jsx(D,{value:r,children:r},r))]})]}),t.jsx(O,{label:"Amount",type:"number",value:f,onChange:r=>s(r.target.value),fullWidth:!0,required:!0}),t.jsx(O,{label:"Note",value:u,onChange:r=>d(r.target.value),fullWidth:!0,multiline:!0,rows:3})]}),t.jsx(W,{sx:{mt:3,pt:2,borderTop:"1px solid",borderColor:"divider"},children:t.jsxs(L,{direction:"row",spacing:2,justifyContent:"flex-end",children:[t.jsx($,{onClick:T,disabled:y,children:"Cancel"}),t.jsx($,{variant:"contained",onClick:k,disabled:!f||!c||y,children:y?p?"Updating...":"Adding...":p?"Update":"Add Transaction"})]})})]})})},tt={Income:"success.main",Expense:"error.main",Savings:"info.main"};function at({filteredAndSortedTransactions:e,sort:a,getCategoryName:n,onSort:o,onUpdateTransaction:l,onDeleteTransaction:i}){const{page:y,setPage:p,totalPages:x,paginatedTransactions:f,modalOpen:s,selectedTransaction:u,confirmOpen:d,editTransaction:c,deleteTransaction:g,confirmDelete:v,cancelDelete:h,saveTransaction:I,closeModal:C}=et(e,l,i);return t.jsxs(t.Fragment,{children:[t.jsx(me,{component:ve,children:t.jsxs(he,{children:[t.jsx(je,{children:t.jsxs(ie,{children:[t.jsx(w,{sortDirection:a.field==="date"?a.direction:!1,children:t.jsx(U,{active:a.field==="date",direction:a.field==="date"?a.direction:"asc",onClick:()=>o("date"),children:"Date"})}),t.jsx(w,{sortDirection:a.field==="type"?a.direction:!1,children:t.jsx(U,{active:a.field==="type",direction:a.field==="type"?a.direction:"asc",onClick:()=>o("type"),children:"Type"})}),t.jsx(w,{sortDirection:a.field==="category"?a.direction:!1,children:t.jsx(U,{active:a.field==="category",direction:a.field==="category"?a.direction:"asc",onClick:()=>o("category"),children:"Category"})}),t.jsx(w,{children:"Subcategory"}),t.jsx(w,{sortDirection:a.field==="amount"?a.direction:!1,children:t.jsx(U,{active:a.field==="amount",direction:a.field==="amount"?a.direction:"asc",onClick:()=>o("amount"),children:"Amount"})}),t.jsx(w,{children:"Note"}),t.jsx(w,{align:"right",children:"Actions"})]})}),t.jsx(Ce,{children:f.map(b=>t.jsxs(ie,{children:[t.jsx(w,{children:new Date(b.date).toLocaleDateString()}),t.jsx(w,{children:b.type}),t.jsx(w,{children:n(b.categoryId)}),t.jsx(w,{children:b.subcategory||"-"}),t.jsx(w,{sx:{color:tt[b.type],fontWeight:"bold"},children:ye(b.amount)}),t.jsx(w,{children:b.note}),t.jsx(w,{align:"right",children:t.jsxs(L,{direction:"row",spacing:1,justifyContent:"flex-end",children:[t.jsx(K,{color:"primary",onClick:()=>c(b),children:t.jsx(Se,{})}),t.jsx(K,{color:"error",onClick:()=>g(b.id),children:t.jsx(Te,{})})]})})]},b.id))})]})}),t.jsx(L,{mt:2,alignItems:"center",children:t.jsx(Ge,{count:x,page:y,onChange:(b,k)=>p(k),color:"primary"})}),s&&u&&t.jsx(pe,{open:s,onClose:C,onSave:I,transaction:u}),t.jsxs(Pe,{open:d,onClose:h,children:[t.jsx(Ie,{children:"Confirm Delete"}),t.jsx(ke,{children:t.jsx(te,{children:"Are you sure you want to delete this transaction?"})}),t.jsxs(we,{children:[t.jsx($,{onClick:h,children:"Cancel"}),t.jsx($,{color:"error",variant:"contained",onClick:v,children:"Delete"})]})]})]})}function nt(){const{user:e}=le(),{addTransaction:a,isLoading:n}=ee(),[o,l]=j.useState(!1),[i,y]=j.useState("Income"),p=s=>{y(s),l(!0)},x=()=>l(!1),f=async s=>{if(e)try{await a(e.id,{type:s.type,amount:s.amount,categoryId:s.categoryId,subcategory:s.subcategory,note:s.note,date:new Date().toISOString()}),x()}catch(u){console.error("Failed to add transaction:",u)}};return t.jsxs(t.Fragment,{children:[t.jsxs(L,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"flex-end",children:[t.jsx($,{variant:"outlined",color:"info",onClick:()=>p("Income"),disabled:n,children:"Add Income"}),t.jsx($,{variant:"outlined",color:"info",onClick:()=>p("Expense"),disabled:n,children:"Add Expense"}),t.jsx($,{variant:"outlined",color:"info",onClick:()=>p("Savings"),disabled:n,children:"Add Savings"})]}),t.jsx(pe,{open:o,onClose:x,onSave:f,transactionType:i})]})}function lt(){const{user:e}=le(),{transactions:a,categories:n,updateTransaction:o,deleteTransaction:l}=ee(),i=g=>n.find(v=>v.id===g)?.name||"Uncategorized",{filters:y,sort:p,filteredAndSortedTransactions:x,updateFilter:f,updateSort:s,clearFilters:u}=Xe(a,i),d=(g,v)=>{e&&o(e.id,g,v)},c=g=>{e&&l(e.id,g)};return t.jsxs(W,{p:4,children:[t.jsxs(L,{direction:{xs:"column",sm:"row"},justifyContent:{xs:"flex-start",sm:"space-between"},alignItems:"baseline",mb:1,children:[t.jsx(te,{variant:"h5",children:"Transaction Details"}),t.jsx(nt,{})]}),t.jsx(ce,{sx:{mb:3}}),t.jsx(Ze,{filters:y,categories:n,onFilterChange:f,onClearFilters:u}),t.jsx(at,{filteredAndSortedTransactions:x,sort:p,getCategoryName:i,onSort:s,onUpdateTransaction:d,onDeleteTransaction:c})]})}export{lt as default};
